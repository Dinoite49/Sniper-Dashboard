<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sniper Intelligence Pro</title>
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlNuaXBlciBJbnRlbGxpZ2VuY2UgUHJvIiwKICAic2hvcnRfbmFtZSI6ICJTbmlwZXJGWCIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFu[...]
    
    <style>
        :root { --bg: #050a14; --card: #101a2d; --accent: #00ff88; --red: #ff4b2b; --text: #e0e6ed; --gold: #ffd700; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; overflow-x: hidden; }
        
        /* LOGIN & PRIVACIDADE */
        #login-overlay { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 10000; }
        #cookie-banner { position: fixed; bottom: 20px; left: 20px; right: 20px; background: var(--card); border: 1px solid var(--accent); padding: 20px; border-radius: 12px; z-index: 10001; }
        
        /* GRID & CARDS */
        .header { padding: 15px 25px; display: flex; justify-content: space-between; border-bottom: 1px solid #1f2a44; align-items: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 15px; padding: 20px; }
        .card { background: var(--card); border-radius: 12px; padding: 18px; border: 1px solid #1f2a44; }
        
        /* FIBONACCI & MENTOR */
        .gp-box { background: rgba(0, 255, 136, 0.1); color: var(--accent); padding: 10px; border-radius: 6px; border-left: 4px solid var(--accent); margin-top: 10px; }
        #mentor-launcher { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: ce[...]
        #mentor-chat { position: fixed; bottom: 90px; right: 20px; width: 300px; height: 400px; background: var(--card); border: 1px solid var(--accent); border-radius: 15px; display: none; flex-direc[...]        
        /* ANIMAÃ‡ÃƒO DE ALERTA */
        @keyframes flash { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        .sniper-alert { animation: flash 1s infinite; border: 2px solid var(--accent) !important; }
    </style>
</head>
<body>

<audio id="sniper-sound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>

<div id="cookie-banner">
    <h3 style="color:var(--accent); margin:0">ðŸ”’ Termos de Uso & IA</h3>
    <p style="font-size:11px; color:#8892b0;">Este sistema usa APIs e IA para fins educacionais e operacionais. O risco financeiro Ã© de sua inteira responsabilidade.</p>
    <button onclick="acceptTerms()" style="background:var(--accent); border:none; padding:8px 15px; border-radius:5px; font-weight:bold; cursor:pointer;">ACEITAR E CONTINUAR</button>
</div>

<div id="login-overlay" style="display:none">
    <div style="background:var(--card); padding:30px; border-radius:15px; border:1px solid var(--accent); text-align:center;">
        <h2 style="color:var(--accent)">ACESSO SNIPER</h2>
        <input type="email" id="email" placeholder="E-mail" style="width:100%; padding:10px; margin:10px 0; background:#1f2a44; border:none; color:#fff;">
        <input type="password" id="pass" placeholder="Senha" style="width:100%; padding:10px; margin:10px 0; background:#1f2a44; border:none; color:#fff;">
        <button onclick="handleAuth()" style="width:100%; background:var(--accent); padding:10px; border:none; font-weight:bold; cursor:pointer;">ENTRAR / CADASTRAR</button>
    </div>
</div>

<div class="header">
    <div>
        <h2 style="margin:0; color:var(--accent)">SNIPER PRO</h2>
        <button id="install-btn" onclick="installApp()" style="display:none; background:var(--gold); border:none; padding:3px 10px; border-radius:10px; font-size:10px; font-weight:bold; cursor:pointer[...]
    </div>
    <div style="text-align:right">
        <small id="clock">00:00:00</small>
    </div>
</div>

<div class="grid" id="dashboard-grid"></div>

<div id="mentor-launcher" onclick="toggleMentor()">ðŸ¤–</div>
<div id="mentor-chat">
    <div style="background:var(--accent); color:#000; padding:10px; font-weight:bold; display:flex; justify-content:space-between">
        <span>MENTOR SNIPER</span>
        <span onclick="toggleMentor()" style="cursor:pointer">âœ•</span>
    </div>
    <div id="chat-content" style="flex:1; padding:15px; overflow-y:auto; font-size:12px"></div>
    <div style="padding:10px; display:flex; gap:5px">
        <input type="text" id="query" placeholder="Sua dÃºvida..." style="flex:1; background:#1f2a44; border:none; color:#fff; padding:5px; border-radius:5px">
        <button onclick="askMentor()" style="background:var(--accent); border:none; padding:5px 10px; border-radius:5px">ðŸš€</button>
    </div>
</div>

<script>
    // --- LÃ“GICA DE LOGIN & PWA ---
    function acceptTerms() { document.getElementById('cookie-banner').style.display='none'; document.getElementById('login-overlay').style.display='flex'; }
    
    function handleAuth() {
        const user = { email: document.getElementById('email').value, pass: document.getElementById('pass').value };
        localStorage.setItem('sniper_user', JSON.stringify(user));
        document.getElementById('login-overlay').style.display='none';
    }

    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault(); deferredPrompt = e;
        document.getElementById('install-btn').style.display = 'block';
    });

    async function installApp() {
        if (deferredPrompt) { deferredPrompt.prompt(); deferredPrompt = null; }
    }

    // --- MOTOR DE ANÃLISE ---
    const ASSETS = [
        { id: 'EURUSD', name: 'EUR/USD', price: 1.1844, high: 1.1910, low: 1.1800, trend: 'bullish' },
        { id: 'XAUUSD', name: 'GOLD (XAU)', price: 4985.50, high: 5020.00, low: 4950.00, trend: 'bullish' }
    ];

    function update() {
        const grid = document.getElementById('dashboard-grid');
        grid.innerHTML = '';
        ASSETS.forEach(a => {
            const diff = a.high - a.low;
            const gp = a.trend === 'bullish' ? a.high - (diff * 0.618) : a.low + (diff * 0.618);
            const exp = a.trend === 'bullish' ? a.high + (diff * 1.618) : a.low - (diff * 1.618);
            const isGP = Math.abs(a.price - gp) < (diff * 0.05);

            if(isGP) document.getElementById('sniper-sound').play().catch(()=>{});

            grid.innerHTML += `
                <div class="card ${isGP ? 'sniper-alert' : ''}">
                    <h3 style="margin:0">${a.name}</h3>
                    <h1 style="font-family:monospace; margin:10px 0">${a.price.toFixed(a.id==='XAUUSD'?2:5)}</h1>
                    <div class="gp-box">GP 0.618: ${gp.toFixed(5)}</div>
                    <div style="font-size:11px; margin-top:10px; color:var(--gold)">ALVO 1.618: ${exp.toFixed(5)}</div>
                    <div style="margin-top:10px; text-align:center; font-weight:bold; color:var(--accent)">
                        ${isGP ? 'ðŸŽ¯ TIRO DE SNIPER DETECTADO' : 'AGUARDANDO CONFLUÃŠNCIA'}
                    </div>
                </div>
            `;
        });
    }

    // --- MENTOR AI SEGURANÃ‡A ---
    function toggleMentor() { const c = document.getElementById('mentor-chat'); c.style.display = c.style.display==='flex'?'none':'flex'; }
    function askMentor() {
        const q = document.getElementById('query').value.toLowerCase();
        const content = document.getElementById('chat-content');
        const forbidden = ["api", "code", "chave", "backend", "senha", "logica"];
        
        content.innerHTML += `<p><b>VocÃª:</b> ${q}</p>`;
        
        let r = "Foque no 0.618 de Fibonacci para entradas de alta convicÃ§Ã£o.";
        if(forbidden.some(w => q.includes(w))) r = "Acesso Negado. Minha inteligÃªncia Ã© estritamente operacional.";
        if(q.includes("yield")) r = "Yields caindo favorecem a compra de EUR e GBP.";

        setTimeout(() => {
            content.innerHTML += `<p style="color:var(--accent)"><b>Mentor:</b> ${r}</p>`;
            content.scrollTop = content.scrollHeight;
        }, 500);
        document.getElementById('query').value = '';
    }

    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); update(); }, 1000);
    update();
</script>
</body>
</html>